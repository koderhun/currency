(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5728:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(2588)}])},2588:function(e,n,t){"use strict";t.r(n),t.d(n,{Home:function(){return D},default:function(){return K}});var r=t(5893),a=t(9008),s=t.n(a),u=t(6042),c=t(9396),o=t(828),l=t(6305),i=t(7294),f=t(5166),m=t(4184),d=t.n(m),v=t(8281),_=t.n(v),g=function(e){var n=e.name,t=n.substring(0,2).toLowerCase();return(0,r.jsxs)("div",{className:_().flag,title:n,children:[(0,r.jsx)("span",{className:d()("fi","fi-".concat(t),_().flagImg)}),(0,r.jsx)("span",{className:_().name,children:n})]})},h=t(8555),x=t.n(h),p=function(e){var n=e.currencyInput,t=n.code,a=n.value,s=(0,i.useContext)(b).changeItemInput;return 0===a&&(a=""),(0,r.jsxs)("div",{className:x().line,children:[(0,r.jsx)("div",{className:x().flag,children:(0,r.jsx)(g,{name:t})}),(0,r.jsx)("div",{className:x().content,children:(0,r.jsx)(f.oc,{className:x().input,mask:Number,radix:".",type:"tel",name:t,placeholder:"0",min:0,onChange:function(e){return s(e.target.value,t)},onKeyDown:function(e){"Enter"===e.key&&s(e.target.value,t)},onFocus:function(e){return e.target.select()},value:String(a)})})]})},j=function(){return(0,i.useContext)(b).formDataState.map(function(e,n){return(0,r.jsx)(p,{currencyInput:e},e.code+n)})},N=t(6435),y=function(e){var n=e.name,t=e.value,r=(0,o.Z)((0,i.useState)(n),2),a=r[0],s=r[1],u=(0,o.Z)((0,i.useState)(t),2);return{inputName:a,setInputName:s,inputValue:u[0],setInputValue:u[1]}},S=[{code:"USD",value:""},{code:"EUR",value:""},{code:"UAH",value:""},{code:"KGS",value:""},{code:"GEL",value:""},{code:"TRY",value:""},{code:"RUB",value:""},{code:"KZT",value:""}],I=i.memo(function(){return(0,r.jsx)("div",{className:"LoaderCustom",children:"Loading..."})}),Z=function(e){var n=e.error;return(console.log(n),n)?(0,r.jsx)("div",{className:"errorMsg",children:(0,r.jsx)("div",{className:"status",children:"FETCH_ERROR"===n.status&&"Нет интернета"})}):null},C=t(6943),E=t.n(C),w=function(e){var n=e.date,t=(0,o.Z)((0,i.useState)(0),2),a=t[0],s=t[1],u=(0,i.useMemo)(function(){return n.toLocaleString("ru",{year:"numeric",month:"long",day:"numeric",weekday:"long",timezone:"UTC",hour:"numeric",minute:"numeric"})},[n]);return(0,i.useEffect)(function(){fetch("/meta.json").then(function(e){return e.json()}).then(function(e){s(e.version)})},[]),(0,r.jsxs)("div",{className:E().InfoBlock,children:[(0,r.jsx)("div",{className:E().date,children:u}),(0,r.jsx)("div",{className:E().version,children:a})]})},k=function(e,n){var t=(0,o.Z)((0,i.useState)(function(){try{var t;return(t=localStorage.getItem(e))?JSON.parse(t):n}catch(r){return console.log(r),n}}),2),r=t[0],a=t[1];return[r,function(n){try{var t=n instanceof Function?n(r):n;a(t),localStorage.setItem(e,JSON.stringify(t))}catch(s){console.log(s)}}]},b=(0,i.createContext)(),L=function(){var e=(0,N.lw)(S),n=e.data,t=e.error,a=e.isLoading,s=e.refetch,f=(0,o.Z)(k("currencyData","null"),2),m=f[0],d=f[1],v=(0,o.Z)((0,i.useState)("now"),2),_=v[0],g=v[1],h=(0,o.Z)((0,i.useState)((0,l.Z)(S)),2),x=h[0],p=h[1],C=(0,o.Z)((0,i.useState)({}),2),E=C[0],L=C[1],D=y({name:"",value:""}),K=D.inputName,R=D.inputValue,T=D.setInputName,O=D.setInputValue;return(0,i.useEffect)(function(){n&&!t?(L(n),d(n),g(new Date)):L(m)},[n]),(0,i.useEffect)(function(){var e=setInterval(function(){console.log("refetch"),s()},6e5);return function(){return clearInterval(e)}},[]),(0,i.useEffect)(function(){if(K){var e=[];x.map(function(n){var t=E["".concat(K,"_").concat(n.code)];K===n.code?e.push((0,c.Z)((0,u.Z)({},n),{value:Number(R)})):e.push((0,c.Z)((0,u.Z)({},n),{value:Number(t.Value)*Number(R)}))}),p(e)}},[K,R]),(0,r.jsxs)(b.Provider,{value:{changeItemInput:function(e,n){T(n),O(e)},formDataState:x},children:[(0,r.jsxs)("form",{className:"form",children:[(0,r.jsxs)("div",{className:"loader-group",children:[a&&(0,r.jsx)(I,{}),(0,r.jsx)(j,{})]}),t&&(0,r.jsx)(Z,{error:t})]}),(0,r.jsx)(w,{date:_})]})},D=function(){return(0,r.jsxs)("div",{className:"general",children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:"Converter"}),(0,r.jsx)("meta",{property:"og:title",content:"Converter"},"title")]}),(0,r.jsx)("h1",{className:"title",children:"Converter"}),(0,r.jsx)(L,{})]})},K=D},8555:function(e){e.exports={line:"styles_line__S1_Ob",input:"styles_input__LBZs7",content:"styles_content__mQS8o",flag:"styles_flag__jJrDr"}},8281:function(e){e.exports={flag:"styles_flag__orgC2",flagImg:"styles_flagImg__JRCKi",name:"styles_name__z_oTs"}},6943:function(e){e.exports={InfoBlock:"styles_InfoBlock__KjSKL",version:"styles_version__KSZzU"}}},function(e){e.O(0,[442,774,888,179],function(){return e(e.s=5728)}),_N_E=e.O()}]);